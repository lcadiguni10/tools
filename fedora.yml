---
- name: Preparing Workstation
  hosts: localhost
  connection: local
  tasks:

    # Instalar pacotes necessários
    - name: Installing Linux Apps
      become: true
      dnf:
        name: '{{ item }}'
        state: present
      loop:
          - vim
          - htop
          - curl
          - wget
          - ncdu
          - tree
          - ca-certificates
          - gnupg
          - python3-pip
          - make
          - git
          - bash-completion
          - zsh
          - flameshot
          - tilix
          - krita
          - jq
          - mtr

    - name: Install VirtualBox Repository with disabled GPG check
      become: true
      copy:
        dest: /etc/yum.repos.d/virtualbox.repo
        content: |
          [virtualbox]
          name=Oracle Linux / RHEL / CentOS / Fedora / EPEL $releasever - $basearch
          baseurl=https://download.virtualbox.org/virtualbox/rpm/fedora/$releasever/$basearch
          enabled=1
          gpgcheck=0  # Desabilitando a verificação da chave GPG

    - name: Install VirtualBox (ignore GPG check)
      become: true
      dnf:
        name: VirtualBox
        state: present
        disable_gpg_check: yes

    # Outras instalações
    - block:
        - name: Installing Vagrant 2.2.18
          become: true
          unarchive:
            src: 'https://releases.hashicorp.com/vagrant/2.2.18/vagrant_2.2.18_linux_amd64.zip'
            dest: /usr/local/bin
            remote_src: yes

    - block:
        - name: Installing Terraform 0.12.31
          become: true
          unarchive:
            src: 'https://releases.hashicorp.com/terraform/0.12.31/terraform_0.12.31_linux_amd64.zip'
            dest: /usr/local/bin
            remote_src: yes

    - name: Install Visual Studio Code and extensions
      become: true
      dnf:
        name: code
        state: present

    - name: Install Brave Browser
      become: true
      dnf:
        name: brave-browser
        state: present
